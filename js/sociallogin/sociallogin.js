/** * Business Fuel - Sociallogin */document.observe("dom:loaded", function() {     var i;     try {    	    	/**		 * Get all href links Here		 */        var links = document.links;        for (i = 0; i < links.length; i++) {                    	/**    		 * login links    		 */        	if (links[i].href.search('/customer/account/login/') != -1 && links[i].href.indexOf("#") == -1 ) {                links[i].href = 'javascript:fuel_sociallogin();';            }        	        	/**    		 * login links    		 */        	if (links[i].href.search('/customer/account/login//') != -1 && links[i].href.indexOf("#") == -1 ) {                links[i].href = 'javascript:fuel_sociallogin();';            }                       /**    		 * wishlist link     		 */            if (links[i].href.search('/wishlist/') != -1 && links[i].href.indexOf("#") == -1 ) {                links[i].href = 'javascript:fuel_sociallogin();';            }                        /**    		 * my account link     		 */            if (links[i].href.search('/customer/account/') != -1 && links[i].href.indexOf("#") == -1  ) {                links[i].href = 'javascript:fuel_sociallogin();';            }                        /**    		 * background fade element.    		 */            if ($('bg_fade') == null) {                var screen = new Element('div', {'id': 'bg_fade'});                document.body.appendChild(screen);            }        }        if( window.location.href.search('/customer/account/login/') != -1 ||  window.location.href.search('/customer/account/create/') != -1 )        	{        	fuel_sociallogin();        	}        /**		 * bind in checkout field.		 */        if (document.getElementById("checkout-step-login"))        {            $$('.col-2 .buttons-set').each(function(e) {                e.insert({bottom: '<div id="multilogin"> <button type="button" class="button" style="" onclick="javascript:fuel_sociallogin();" title="Social Login" name="headerboxLink1" id="headerboxLink1"><span><span>Social Login</span></span></button></div>'});            });        }        Event.observe('bg_fade', 'click', function() {            fuel_socialloginclose();        });    }    catch (exception)    {        alert(exception);    }});/** * Business Fuel - sociallogin login using ajax */function doSociallogin(form_id, postUrl, formSuccess, progress_image) {if(form_id == 'social_frm_register'){	verifyMobile(form_id, postUrl, formSuccess, progress_image);} else {    new Ajax.Updater(            {success: formSuccess}, postUrl, {        method: 'post',        asynchronous: true,        evalScripts: false,        onComplete: function(transport, json) {            Element.hide(formSuccess);            var pattern_url = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;            var url_value = pattern_url.test(transport.responseText);            if (url_value == true)            {                //Form.reset(form_id);                window.location.href = transport.responseText;            } else {                Element.show(formSuccess);            }            Element.hide(progress_image);        },        onLoading: function(request, json) {            Element.show(progress_image);        },        parameters: $(form_id).serialize(true),    }    );}}function verifyMobile(form_id, postUrl, formSuccess, progress_image){	jQuery('#progress_image_register').show(); 	jQuery('#sregister').attr('disabled', true);	jQuery.ajax({		url:postUrl,		data:jQuery('#social_frm_register').serialize(),		type:'post',		crossDomain: true,		dataType:'json',		success:function(data){			if(data.success == 1) {				jQuery('#sregister').attr('disabled', true);				jQuery('#register_block').html(data.form);				jQuery('#register_block').css('padding','15px');			}else if(data.success == 2){				jQuery('#sregister').attr('disabled', true);				jQuery('#success_msg').show();				jQuery('#success_msg').html(data.message);				jQuery('#success_msg').css('color','red');				jQuery('#success_msg').css('border','1px solid #eca1a1');			}else{				jQuery('#sregister').attr('disabled', false);				jQuery('#success_msg').show();				jQuery('#success_msg').html(data.message);				jQuery('#success_msg').css('color','red');				jQuery('#success_msg').css('border','1px solid #eca1a1');			}			jQuery('#progress_image_register').hide();		}	});}/** * Business Fuel - social login pop-up function */function fuel_sociallogin(){    	/**	 * Background fade is visible	 */    $('bg_fade').setStyle({visibility: 'visible', opacity: 0});    new Effect.Opacity('bg_fade', {duration: .2, from: 0, to: 0.4});       /**	 * Setting the window width and height	 */    if (typeof window.innerHeight != 'undefined') {        document.getElementById('header_logo_Div').style.top = Math.round(document.body.offsetTop + ((window.innerHeight - document.getElementById('header_logo_Div').getHeight())) / 2) + 'px';        document.getElementById('header_logo_Div').style.left = Math.round(document.body.offsetLeft + ((window.innerWidth - document.getElementById('header_logo_Div').getWidth())) / 2) + 'px';    } else {        document.getElementById('header_logo_Div').style.top = Math.round(document.body.offsetTop + ((document.documentElement.offsetHeight - document.getElementById('header_logo_Div').getHeight())) / 2) + 'px';        document.getElementById('header_logo_Div').style.left = Math.round(document.body.offsetLeft + ((document.documentElement.offsetWidth - document.getElementById('header_logo_Div').getWidth())) / 2) + 'px';    }    $('header_logo_Div').setStyle({display: 'block'});}/** * Business Fuel - social login pop-up close function */function fuel_socialloginclose() {    $('header_logo_Div').setStyle({display: 'none'});    $('register_block').setStyle({display: 'none'});    $('login_block').setStyle({display: 'block'});    $('forget_password_div').setStyle({display: 'none'});             /**	 * Background fade	 */    $('bg_fade').setStyle({visibility: 'hidden', opacity: 0});    new Effect.Opacity('bg_fade', {duration: .2, from: 0.4, to: 0});    Fuel_clearall();}/** * Business Fuel - social login pop-up clear all error message function */function Fuel_clearall(){    $$('.popup_error_msg').each(function(msg) {        msg.innerHTML = '';    });    $('register_error').hide();    $$('#socialpopup_main_div input').each(function(c) {        $(c).setValue('');        $(c).removeClassName('validation-failed');    });    $('formSuccess').hide();    $('form_login').reset();    $$('.validation-advice').each(function(msg) {        msg.hide();    });}/** * Show / hide forms based on users clicks */function show_hide_socialforms(frmid) {    if (frmid == "1") {              	/**		 * login form		 */        $('register_block').hide();        $('forget_password_div').hide();        $('form_login').reset();        $('login_block').show();        if (typeof window.innerHeight != 'undefined') {            var newpostop = Math.round(document.body.offsetTop + ((window.innerHeight - $('header_logo_Div').getHeight())) / 2);            var newposleft = Math.round(document.body.offsetLeft + ((window.innerWidth - $('header_logo_Div').getWidth())) / 2);            $('header_logo_Div').setStyle({top: newpostop + 'px', left: newposleft + 'px'});        } else {            var newpostop = Math.round(document.body.offsetTop + ((document.documentElement.offsetHeight - $('header_logo_Div').getHeight())) / 2);            var newposleft = Math.round(document.body.offsetLeft + ((document.documentElement.offsetWidth - $('header_logo_Div').getWidth())) / 2);            $('header_logo_Div').setStyle({top: newpostop + 'px', left: newposleft + 'px'});        }        return false;    } else if (frmid == "2") {                    	/**		 * Create Account form		 */        $('login_block').hide();        $('forget_password_div').hide();        $('register_block').show();        Fuel_clearall();        if (typeof window.innerHeight != 'undefined') {            var newpostop = Math.round(document.body.offsetTop + ((window.innerHeight - $('header_logo_Div').getHeight())) / 2);            var newposleft = Math.round(document.body.offsetLeft + ((window.innerWidth - $('header_logo_Div').getWidth())) / 2);            $('header_logo_Div').setStyle({top: newpostop + 'px', left: newposleft + 'px'});        } else {            var newpostop = Math.round(document.body.offsetTop + ((document.documentElement.offsetHeight - $('header_logo_Div').getHeight())) / 2);            var newposleft = Math.round(document.body.offsetLeft + ((document.documentElement.offsetWidth - $('header_logo_Div').getWidth())) / 2);            $('header_logo_Div').setStyle({top: newpostop + 'px', left: newposleft + 'px'});        }        return false;    } else if (frmid == "3") {                           	/**		 * Forget password form		 */        Effect.toggle('forget_password_div', 'slide', {delay: 0.5});        $('register_block').hide();        $('forget_password').setValue('');        return false;    }}