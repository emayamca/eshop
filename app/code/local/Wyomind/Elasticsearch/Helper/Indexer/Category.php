<?php

/**     
 * The technical support is guaranteed for all modules proposed by Wyomind.
 * The below code is obfuscated in order to protect the module's copyright as well as the integrity of the license and of the source code.
 * The support cannot apply if modifications have been made to the original source code (https://www.wyomind.com/terms-and-conditions.html).
 * Nonetheless, Wyomind remains available to answer any question you might have and find the solutions adapted to your needs.
 * Feel free to contact our technical team from your Wyomind account in My account > My tickets. 
 * Copyright Â© 2018 Wyomind. All rights reserved.
 * See LICENSE.txt for license details.
 */
  class Wyomind_Elasticsearch_Helper_Indexer_Category extends Wyomind_Elasticsearch_Helper_Indexer_Abstract {public $x18=null;public $xb0=null;public $xa3=null;  protected $_searchableAttributes;  protected $_categoriesWithPathNames = array();  protected $_blockClass = 'Wyomind_Elasticsearch_Block_Autocomplete_Category';  private $x4989 = null; public $error = "\105\x6castic\x73e\141\162\x63\x68 C\141\164e\x67o\162y\x20I\156\x64\145x\x20\x3a\40I\156\166\141\x6c\151\144\40\x4c\x69c\145\x6e\163\x65!"; public function __construct() {$x6810 = "\x68e\x6c\x70\145\x72";$x6b58 = "\x61\160\160";$x6b88 = "\147e\x74\115\x6fd\145\154";$x69e2 = "\147etR\145\x73\x6f\165r\143e\115o\144el";$x6aed = "di\163p\x61t\x63\150E\166\x65n\164"; $this->_construct(); } public function _construct() {$x6810 = "\150\145l\160\x65r";$x6b58 = "a\160\x70";$x6b88 = "\147\145t\x4dodel";$x69e2 = "\147\145\164R\x65so\165\x72\143\x65\115\x6f\144e\154";$x6aed = "\144\151s\x70\x61\x74\143hE\x76\x65\156t"; $this->x4989 = Mage::helper("l\x69\143\145n\163\145m\x61\x6e\x61\147\x65\162/\144\x61\x74\x61"); $this->x4989->constructor($this, func_get_args()); }  public function export($x478b = array()) {$x4759 = $this->x18->x495b->{$this->x18->x495b->{$this->xa3->x495b->x5dd2}};$x474d = $this->xa3->x4920->{$this->x18->x4920->{$this->x18->x4920->x4c70}};$x4781 = $this->xb0->x494d->{$this->xa3->x494d->x5572};$x4788 = $this->xb0->x4973->{$this->xb0->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x66f8}}};$x47ce = $this->xa3->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x55a3}};$xf25 = $this->x18->x495b->x5e13;$x1432 = $this->x18->x4973->x6710;$xfbe = $this->xb0->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4cd1}};$x130f = $this->x18->x4973->{$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->{$this->x18->x4973->x673c}}}};$x1040 = $this->x18->x4973->x6740;$x1072 = $this->xa3->x4973->x674d;$x1130 = $this->xb0->x4973->x675e;$x12bb = $this->x18->x495b->{$this->xa3->x495b->x5e6e};$x130a = $this->xb0->x4920->{$this->xa3->x4920->x4d2f};$x136b = $this->x18->x494d->{$this->x18->x494d->{$this->x18->x494d->x5629}};$x144d = $this->xa3->x4920->x4d40;$x6810 = "\x68elper";$x6b58 = "a\160\x70";$x6b88 = "\x67\x65\164\115\157d\x65\154";$x69e2 = "\x67\x65\x74R\x65\x73ou\x72\143\145\x4do\144\x65l";$x6aed = "\x64i\163patc\x68\x45\166e\156\164"; try { ${$this->xb0->x4973->{$this->x18->x4973->{$this->x18->x4973->x645b}}} = $this; ${$this->xb0->x4920->x4a21} = "\115\x61\x67\x65"; ${$this->xb0->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4a34}}} = "\150\x65l\160\145\162"; ${$this->xb0->x494d->{$this->x18->x494d->x531e}} = "\164hr\x6fwExc\145pt\151o\156"; ${$this->x18->x494d->x5323} = $x4759($x474d()); ${$this->xb0->x494d->x52fe}->{$this->xb0->x4920->{$this->xb0->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4995}}}}->{$this->x18->x4920->x4dc7}(${$this->xa3->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4a1d}}}, ${$this->xa3->x494d->{$this->xb0->x494d->{$this->x18->x494d->x532c}}}); if (${$this->xb0->x494d->{$this->xb0->x494d->x5302}}->{$this->xa3->x4920->x4de0}(${$this->xa3->x494d->{$this->xb0->x494d->{$this->x18->x494d->x532c}}}) != $x4759(${$this->xa3->x494d->{$this->xb0->x494d->{$this->xb0->x494d->{$this->xb0->x494d->{$this->xb0->x494d->x5330}}}}})) { ${$this->xb0->x495b->x5bea}::${$this->x18->x495b->x5bf8}(${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x6463}}}::${$this->xb0->x495b->x5bf2}("\145\154\x61sti\143\163\x65\141\162c\150")->{$this->xb0->x4920->x4deb}(${$this->x18->x4973->x6455}->{$this->xa3->x4920->{$this->xb0->x4920->{$this->x18->x4920->{$this->xb0->x4920->x49aa}}}})); } ${$this->xb0->x494d->{$this->xb0->x494d->x5335}} = array(); ${$this->xa3->x494d->{$this->x18->x494d->{$this->x18->x494d->{$this->xb0->x494d->x5342}}}} = Mage::$x6b58()->{$this->x18->x4920->x4e07}(); foreach (Mage::$x6b58()->{$this->xa3->x4920->x4e19}() as ${$this->xb0->x495b->x5c1c}) {  if (!${$this->x18->x4973->{$this->x18->x4973->x64a1}}->{$this->xb0->x4920->x4e22}()) { continue; } Mage::$x6b58()->{$this->x18->x4920->x4e3a}(${$this->x18->x495b->{$this->x18->x495b->x5c20}}); ${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->{$this->x18->x4973->x64b1}}}} = (int) ${$this->x18->x4973->x64a0}->{$this->x18->x4920->x4e41}(); if (isset(${$this->xa3->x4973->x644b}['store_id'])) { if (!$x4781(${$this->xb0->x494d->{$this->xa3->x494d->x52f4}}['store_id'])) { ${$this->xa3->x4920->{$this->x18->x4920->x4a15}}['store_id'] = array(${$this->xb0->x494d->x52f3}['store_id']); } if (!$x4788(${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x64ae}}}, ${$this->xa3->x495b->{$this->x18->x495b->x5bdd}}['store_id'])) { continue; } } $this->{$this->x18->x4920->x4e50}(' > Exporting categories of store %s', ${$this->x18->x4973->{$this->x18->x4973->x64a1}}->{$this->x18->x4920->x4e5b}()); ${$this->xa3->x4973->x6485}[${$this->xb0->x494d->{$this->x18->x494d->{$this->xb0->x494d->x5350}}}] = array();  ${$this->xb0->x494d->{$this->x18->x494d->{$this->xa3->x494d->x5361}}} = $this->{$this->x18->x4920->x4e67}('category', ${$this->xa3->x4920->{$this->xb0->x4920->{$this->xa3->x4920->x4a65}}}); ${$this->xb0->x495b->{$this->x18->x495b->x5c33}} = Mage::$x6b88('catalog/category')->{$this->xb0->x4920->x4e82}(); ${$this->x18->x494d->x5367}->{$this->xa3->x4920->x4e8b}(${$this->xa3->x4920->{$this->x18->x4920->x4a64}}->{$this->x18->x4920->x4e41}()); ${$this->xa3->x494d->{$this->x18->x494d->x5378}} = ${$this->x18->x4973->{$this->xb0->x4973->{$this->x18->x4973->x64a4}}}->{$this->x18->x4920->x4ea4}(); ${$this->x18->x4973->x64be}->{$this->x18->x4920->x4eaf}() ->{$this->xa3->x4920->x4ebe}(${$this->xb0->x494d->{$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->{$this->x18->x494d->x5364}}}}}) ->{$this->x18->x4920->x4ed0}('path', array('like' => "1/{${$this->xa3->x495b->x5c39}}/%")); ${$this->x18->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4a7d}}}->{$this->xa3->x4920->x4ee7}(); foreach (${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->{$this->xa3->x494d->x536e}}}} as ${$this->xa3->x4973->{$this->xb0->x4973->{$this->x18->x4973->{$this->xa3->x4973->{$this->x18->x4973->x64e5}}}}}) { ${$this->xa3->x4973->{$this->xb0->x4973->{$this->x18->x4973->{$this->xa3->x4973->{$this->x18->x4973->x64e5}}}}}->{$this->xa3->x4920->x4efc}()->{$this->xa3->x4920->x4f09}(${$this->xa3->x4920->{$this->xb0->x4920->{$this->xb0->x4920->{$this->xb0->x4920->x4a6a}}}}); ${$this->xb0->x494d->{$this->xb0->x494d->x5335}}[${$this->xb0->x494d->{$this->x18->x494d->{$this->xb0->x494d->{$this->xb0->x494d->x5354}}}}][${$this->xa3->x4973->{$this->xb0->x4973->{$this->x18->x4973->{$this->xb0->x4973->x64e0}}}}->{$this->x18->x4920->x4e41}()] = $x47ce( array( 'id' => ${$this->xa3->x494d->x537b}->{$this->x18->x4920->x4e41}(), '_url' => ${$this->xb0->x4920->{$this->x18->x4920->x4a8f}}->{$this->x18->x4920->x4f33}(), '_path' => $this->{$this->xb0->x4973->x66a8}(${$this->x18->x4920->x4a8a}), ), ${$this->x18->x4920->x4a8a}->{$this->xa3->x4920->x4f52}(${$this->xa3->x494d->x5359}) ); } $this->{$this->x18->x4920->x4e50}(' > Categories exported'); } Mage::$x6b58()->{$this->x18->x4920->x4e3a}(${$this->x18->x494d->x533b}); return ${$this->xb0->x494d->{$this->xb0->x494d->x5335}}; } catch (Exception $e) { throw $e; } }  public function getSearchableAttributes($x4806 = null) {$x151c = $this->xa3->x4920->{$this->xb0->x4920->x4d8f};$x6810 = "h\x65l\x70\145\x72";$x6b58 = "ap\x70";$x6b88 = "\x67etM\x6f\x64\x65\x6c";$x69e2 = "g\145\164\122\145s\157\x75r\143\145\x4do\144\x65\x6c";$x6aed = "\144\x69\163\160\x61\164\143\150\x45\166\145\156\164"; if (null === $this->{$this->xb0->x4920->{$this->xa3->x4920->{$this->xa3->x4920->x49ba}}}) { $this->{$this->x18->x4920->x49da} = array(); ${$this->x18->x494d->{$this->xa3->x494d->{$this->xa3->x494d->{$this->xa3->x494d->x5431}}}} = $this->{$this->xa3->x4920->x4f91}()->{$this->xa3->x4920->x4f99}('catalog_category'); ${$this->xa3->x4920->{$this->xb0->x4920->{$this->xb0->x4920->x4b2f}}} = ${$this->xa3->x4920->{$this->xb0->x4920->{$this->x18->x4920->{$this->x18->x4920->{$this->xb0->x4920->x4b25}}}}}->{$this->xb0->x4920->x4fa4}();  ${$this->xb0->x4973->x65a1} = Mage::$x69e2('catalog/category_attribute_collection') ->{$this->x18->x4920->x4fbb}(${$this->x18->x495b->{$this->xb0->x495b->x5cdb}}->{$this->x18->x4920->x4fcd}()) ->{$this->xa3->x4920->x4fd9}('attribute_code', array( 'in' => $this->{$this->x18->x4920->x4e67}('category', ${$this->xa3->x4920->{$this->xa3->x4920->x4b19}}) )); ${$this->xb0->x494d->{$this->xa3->x494d->x544d}} = ${$this->xa3->x4973->{$this->xb0->x4973->x65a6}}->{$this->x18->x4920->x4ff6}(); foreach (${$this->xb0->x4973->{$this->xa3->x4973->x65a9}} as ${$this->xa3->x4920->x4b54}) {  ${$this->xa3->x494d->{$this->xa3->x494d->x5458}}->{$this->xa3->x4920->x4ffd}(${$this->x18->x4973->{$this->xa3->x4973->{$this->x18->x4973->x659f}}}); $this->{$this->x18->x4920->x49da}[${$this->xa3->x4920->x4b54}->{$this->x18->x4920->x500b}()] = ${$this->x18->x4973->{$this->xa3->x4973->{$this->x18->x4973->{$this->xa3->x4973->{$this->xb0->x4973->x65b8}}}}}; } } return $this->{$this->x18->x4920->x49da}; }  public function getStoreIndexProperties($x4871 = null) {$x4840 = $this->x18->x495b->{$this->xa3->x495b->x5eb4};$x159 = $this->x18->x494d->x5669;$x4883 = $this->xa3->x495b->x5ece;$x15bb = $this->xa3->x4973->{$this->xb0->x4973->{$this->x18->x4973->x67de}};$x6810 = "\150e\154\x70er";$x6b58 = "\141\160\160";$x6b88 = "\x67\x65t\x4d\157de\154";$x69e2 = "\x67e\164\x52\x65\x73\x6f\x75\x72ce\115\157\144\x65\x6c";$x6aed = "\x64\x69\x73\x70\141t\143\150E\166e\x6e\x74"; ${$this->x18->x495b->{$this->x18->x495b->{$this->xa3->x495b->x5c6d}}} = Mage::$x6b58()->{$this->x18->x4920->x4e07}(${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x539c}}}); ${$this->xb0->x494d->{$this->xa3->x494d->x53a6}} = 'elasticsearch_category_index_properties_' . ${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x539c}}}->{$this->x18->x4920->x4e41}(); if (Mage::$x6b58()->{$this->xb0->x4920->x504c}('config')) { ${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x6516}}} = Mage::$x6b58()->{$this->x18->x4920->x5064}(${$this->xa3->x495b->x5c71}); if (${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x6516}}}) { return $x4840(${$this->xb0->x494d->x53ad}); } } ${$this->xa3->x495b->{$this->xb0->x495b->x5c7a}} = array(); ${$this->x18->x4920->{$this->xb0->x4920->x4aca}} = $this->{$this->xa3->x494d->{$this->xa3->x494d->{$this->xa3->x494d->x5519}}}(${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x539c}}}); foreach (${$this->x18->x4973->x651c} as ${$this->xa3->x4920->{$this->xa3->x4920->{$this->xb0->x4920->x4ad3}}}) {  ${$this->x18->x4920->x4ade} = ${$this->x18->x494d->{$this->xa3->x494d->{$this->xa3->x494d->x53cf}}}->{$this->x18->x4920->x500b}(); ${$this->xa3->x4920->{$this->xa3->x4920->{$this->xb0->x4920->{$this->xb0->x4920->{$this->x18->x4920->x4ad9}}}}}->{$this->x18->x4920->x5093}(true); ${$this->xa3->x494d->{$this->xb0->x494d->x53b2}}[${$this->xb0->x495b->{$this->xa3->x495b->{$this->xa3->x495b->{$this->xa3->x495b->x5c96}}}}] = $this->{$this->xb0->x4920->x50a9}(${$this->x18->x494d->{$this->x18->x494d->x53cb}}, ${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x539c}}}); }  ${$this->xa3->x4973->{$this->xa3->x4973->x6513}}['_url'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', );  ${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->{$this->x18->x4973->x6519}}}}['_path'] = array( 'type' => 'string', 'store' => true, 'index' => 'no', ); ${$this->xb0->x494d->x53ad} = new Varien_Object(${$this->xa3->x494d->{$this->xb0->x494d->x53b2}}); Mage::$x6aed('wyomind_elasticsearch_index_properties', array( 'indexer' => $this, 'store' => ${$this->x18->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x539c}}}, 'properties' => ${$this->xa3->x4920->x4ac1}, )); ${$this->xa3->x4973->{$this->xa3->x4973->x6513}} = ${$this->xb0->x495b->x5c79}->{$this->xa3->x4920->x4de0}(); if (Mage::$x6b58()->{$this->xb0->x4920->x504c}('config')) { ${$this->x18->x4920->{$this->xa3->x4920->{$this->xb0->x4920->x4ae9}}} = $this->{$this->xa3->x4920->x50fb}(); Mage::$x6b58()->{$this->xb0->x4920->x5119}($x4883(${$this->xa3->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x6516}}}), ${$this->xb0->x4920->{$this->xb0->x4920->x4abe}}, array('config'), ${$this->x18->x495b->{$this->xb0->x495b->{$this->xa3->x495b->x5ca0}}}); } return ${$this->x18->x4920->{$this->x18->x4920->x4ac2}}; }  public function getCategoriesWithPathNames($x48db = null) {$x48af = $this->x18->x495b->{$this->x18->x495b->{$this->xa3->x495b->{$this->x18->x495b->{$this->x18->x495b->x5f04}}}};$x6810 = "\150e\154p\x65r";$x6b58 = "\x61p\160";$x6b88 = "\147e\x74M\x6fd\x65l";$x69e2 = "\147\x65tR\145s\157\x75\x72\143\x65M\157\x64\145\x6c";$x6aed = "\144\x69\163\x70\141\164ch\x45v\145\156\164"; ${$this->xa3->x4973->x65c8} = Mage::$x6b58()->{$this->x18->x4920->x4e07}(${$this->x18->x4920->{$this->x18->x4920->x4b74}}); if (!isset($this->{$this->xa3->x4920->{$this->xa3->x4920->x49f2}}[${$this->x18->x4973->{$this->xa3->x4973->x65cd}}->{$this->x18->x4920->x4e41}()])) { ${$this->xa3->x4920->{$this->xb0->x4920->x4b7c}} = Mage::$x6b88('catalog/category')->{$this->xb0->x4920->x4e82}() ->{$this->xa3->x4920->x4ebe}('name') ->{$this->x18->x4920->x4eaf}() ->{$this->xa3->x4920->x4e8b}(${$this->x18->x4973->{$this->xa3->x4973->x65cd}}->{$this->x18->x4920->x4e41}()); foreach (${$this->xb0->x494d->{$this->xa3->x494d->{$this->xa3->x494d->{$this->xb0->x494d->x5483}}}} as ${$this->xa3->x4920->x4b81}) { ${$this->xb0->x494d->{$this->x18->x494d->{$this->xa3->x494d->x548a}}}->{$this->xa3->x4920->x51ca}(new ArrayObject()); ${$this->x18->x495b->{$this->xb0->x495b->x5d1f}} = $x48af(${$this->xb0->x4920->{$this->xa3->x4920->{$this->xa3->x4920->x4b87}}}->{$this->x18->x4920->x51d4}(), 2); if (!empty(${$this->xb0->x4973->x65f0})) { foreach (${$this->xb0->x4973->x65f0} as ${$this->xb0->x4973->{$this->xb0->x4973->{$this->x18->x4973->{$this->xa3->x4973->{$this->xa3->x4973->x6609}}}}}) { if (${$this->xa3->x495b->x5d3d} = ${$this->xa3->x4973->{$this->x18->x4973->x65da}}->{$this->xb0->x4920->x51e2}(${$this->x18->x494d->{$this->xa3->x494d->{$this->x18->x494d->x5499}}})) { ${$this->xb0->x495b->{$this->xa3->x495b->{$this->xa3->x495b->{$this->xb0->x495b->x5d16}}}}->{$this->xa3->x4920->x51ee}()->{$this->xa3->x4920->x51f9}(${$this->xa3->x495b->x5d3d}->{$this->xa3->x4920->x5203}()); } } } } $this->{$this->xa3->x4920->{$this->x18->x4920->{$this->x18->x4920->x49f3}}}[${$this->x18->x4920->{$this->xa3->x4920->{$this->x18->x4920->x4b78}}}->{$this->x18->x4920->x4e41}()] = ${$this->xb0->x4973->x65d6}; } return $this->{$this->xb0->x494d->x52c5}[${$this->x18->x495b->x5cfd}->{$this->x18->x4920->x4e41}()]; }  public function getCategoryPathName(Mage_Catalog_Model_Category $x48fc, $x48f9 = ' > ') {$x48f5 = $this->x18->x494d->{$this->xb0->x494d->{$this->xa3->x494d->{$this->x18->x494d->x56b0}}};$x6810 = "he\154\160\x65r";$x6b58 = "\141\x70\x70";$x6b88 = "\x67\x65t\115\157\x64\x65\154";$x69e2 = "ge\164\x52eso\x75\x72\x63e\x4d\157\144\x65\154";$x6aed = "di\163p\x61tc\150\x45\166\x65\156t"; ${$this->xa3->x494d->x54ba} = $this->{$this->x18->x4973->{$this->x18->x4973->{$this->xa3->x4973->x66a1}}}(${$this->xa3->x4973->x6618}->{$this->x18->x4920->x4e07}()) ->{$this->xb0->x4920->x51e2}(${$this->xa3->x4920->x4b9b}->{$this->x18->x4920->x4e41}()); if (${$this->xb0->x494d->{$this->x18->x494d->{$this->xb0->x494d->x54bd}}}) { return $x48f5(${$this->x18->x4920->{$this->xa3->x4920->x4ba7}}, (array) ${$this->xa3->x4973->x662f}->{$this->xa3->x4920->x51ee}()); } return ${$this->xa3->x4920->x4b9b}->{$this->xa3->x4920->x5203}(); } } 